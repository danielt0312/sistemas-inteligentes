Abstraction & Application 29 (2020) 60 ‚Äì 73

UADY

Sistema de recomendaci√≥n h√≠brido conversacional para restaurantes
Hybrid conversational recommendation system for restaurants
Alejandro Ram√≠rez Ramos, Mar√≠a Luisa Cervantes Piedras, Karina Gonz√°lez Herrera,
Jos√© Crisp√≠n Hern√°ndez Hern√°ndez, Edmundo Bonilla Huerta,
Maestr√≠a en sistemas Computacionales, Tecnol√≥gico Nacional de M√©xico/I.T Apizaco
m10370742@apizaco.tecnm.mx, m97370533@apizaco.tecnm.mx,
m12370694@apizaco.tecnm.mx, crispin.hh@apizaco.tecnm.mx, edmundo.bh@apizaco.tecnm.mx

Abstract
Providing accurate restaurant information to make a decision on where to eat is becoming
increasingly difficult as the amount of information and the number of options increases. This article
proposes a system based on the integration of a conversational system (chatbot), a system based
on geographical location and two personalized recommendation systems (with data on frequent
promotions and tastes). The system treats the selection of restaurants of interest as an interactive
and conversational process, with the recommendation systems investigating the attributes of the
restaurants and responding to the user. It was tested on a sample of 100 real users. The
experimental results show the benefits of the proposed system, as well as its relevance.

Resumen
Brindar informaci√≥n acertada de restaurantes para tomar una decisi√≥n de donde ir a comer, es cada
vez m√°s dif√≠cil a medida que aumenta la cantidad de informaci√≥n y el n√∫mero de opciones. En este
art√≠culo se propone un sistema basado en la integraci√≥n de un sistema conversacional (chatbot), un
sistema basado en ubicaci√≥n geogr√°fica y dos sistemas de recomendaci√≥n personalizados (con datos
de promociones y gustos frecuentes). El sistema trata la selecci√≥n de restaurantes de inter√©s como
un proceso interactivo y conversacional, con los sistemas de recomendaci√≥n indagando sobre los
atributos de los restaurantes y respondiendo al usuario. Se prob√≥ en una muestra de 100 usuarios.
Los resultados experimentales muestran los beneficios del sistema propuesto, as√≠ como su
relevancia.
_____________________
Keywords and phrases: Sistema Conversacional, Sistemas de recomendaci√≥n, Inteligencia Artificial.
2020 Mathematics Subject Classification: 68N01

_____________________
Fecha de recepci√≥n: septiembre 1, 2020 / Fecha de aceptaci√≥n: octubre 5, 2020

60

A. Ram√≠rez et al. / Abstraction & Application 29 (2020) 60 - 73

61

1 Introducci√≥n
Las recomendaciones juegan un papel importante en la vida diaria. La mayor√≠a de la gente todav√≠a
toma su decisi√≥n de una compra basado en las acciones de otros, generalmente toman informaci√≥n
de sus experiencias. Antes de comprar un producto en l√≠nea, se predisponen a verificar los
comentarios de otros clientes que ya han comprado un producto similar. Cuando quieren ir a un
restaurante o lugar, frecuentemente se pide a los amigos que den consejos y se toman en cuenta
sus opiniones [1].
Los datos disponibles en Internet siguen creciendo exponencialmente y la necesidad de extraer
informaci√≥n √∫til es primordial. Los sistemas de recomendaci√≥n (RS) proporcionan a los clientes f√°cil
acceso a informaci√≥n de productos / servicios. Los RS ya existentes ayudan a los consumidores a
seleccionar productos que probablemente les gustar√°n o podr√≠an comprar en funci√≥n de analizar y
descubrir los patrones de comportamiento de otros clientes [2]. Amazon utiliza diferentes t√©cnicas
de RS para recomendar nuevos productos a sus clientes. Facebook, Twitter y LinkedIn utilizan
t√©cnicas de RS para sugerir personas afines a contactar. TripAdvisor es otra compa√±√≠a que aprovecha
los sistemas de recomendaci√≥n para dar consejos sobre una amplia variedad de opciones de viaje
en todo el mundo, y Eharmony, ayuda a unir a las personas. De este modo, no solo ayudan a los
usuarios en situaciones de sobrecarga de informaci√≥n, sino que tambi√©n pueden contribuir
significativamente al √©xito empresarial de impulsar los proveedores de servicios y las ventas de
comercio electr√≥nico basadas en el historial de navegaci√≥n, b√∫squedas, compras y preferencias de
los usuarios [3]. Actualmente, los sistemas de recomendaci√≥n se encuentran entre los campos de
investigaci√≥n de mayor √©xito de la Inteligencia Artificial en la pr√°ctica.
Los Sistemas conversacionales (Chatbots) incorporan sistemas de inteligencia artificial. Se
caracterizan por la posibilidad de aprender sobre las experiencias, eventos, registros, y situaciones
con el paso del tiempo. Los Sistemas de recomendaci√≥n conversacional (CRS) admiten un di√°logo
orientado a tareas y de m√∫ltiples retroalimentaciones con los usuarios [4]. Durante dicho di√°logo,
el sistema puede, por ejemplo, obtener las referencias detalladas y actuales del usuario,
proporcionar explicaciones para las sugerencias de elementos o procesar comentarios de los
usuarios sobre las sugerencias hechas. Los CRS basados en Procesamiento de Lenguaje Natural
(PNL), sufrieron durante mucho tiempo las limitaciones existentes, principalmente, en el contexto
del procesamiento de comandos de voz. En los √∫ltimos a√±os, sin embargo, se hicieron grandes
avances en la tecnolog√≠a del lenguaje. Hoy, los tel√©fonos inteligentes y los asistentes dom√©sticos
digitales son ampliamente usados por la inclusi√≥n de comandos de voz con alta precisi√≥n [5]. Estos
dispositivos cuentan con sistemas conversacionales para el reconocimiento de los comandos. Alexa,
Siri y Cortana son sistemas conversacionales robustos que se basan m√°s en la tecnolog√≠a de
aprendizaje autom√°tico, en lugar de seguir rutas de di√°logo predefinidas [6].

62

Sistema de recomendaci√≥n h√≠brido conversacional para restaurantes

2 Trabajos relacionados
Desde hace varios a√±os ya existen bibliotecas, paquetes y software para la construcci√≥n de sistemas
de recomendaci√≥n. A continuaci√≥n, se describen sus caracter√≠sticas de algunos de ellos.

Herramientas de Software
Apache Mahout permite construir aplicaciones con implementaciones gratuitas de algoritmos de
aprendizaje basados en m√°quinas distribuidas, o de otra manera escalable centrada b√°sicamente
en √°reas de filtrado colaborativo, clustering y clasificaci√≥n, aprovechando a menudo, y no
limit√°ndose a la plataforma Hadoop [7][8]. Los principales algoritmos de Sistemas de
recomendaci√≥n implementados en Mahout son los siguientes: Filtro colaborativo basado en
contenido, Filtro colaborativo basado en objeto, por factorizaci√≥n de matrices como ALS-WR
(Alternating Least Squares with Weighted-lambda-Regulations) y SVD (Descomposici√≥n de valores
singulares, o Singular Value Decomposition en ingl√©s) [9].
La biblioteca LibRec 2.0 define un conjunto de recomendadores abstractos que pueden ampliarse e
implementarse mediante algoritmos de recomendaci√≥n espec√≠ficos [10]. Se implementan cinco
recomendadores gen√©ricos [11]. El Recomendador general define la estructura base y algunos otros
algoritmos como SlopeOne. Iterative Recommender define un recomendador basado en t√©cnicas
de aprendizaje iterativo. Tambi√©n est√°n los enfoques basados en la factorizaci√≥n matricial (SVD++,
BiasedMF). GraphicRecommender incluye a los algoritmos basados en modelos gr√°ficos
probabil√≠sticos (LDA, BUCM). SocialRecommender define un recomendador que incorpora
informaci√≥n social, como SocialMF y TrustSVD. Por √∫ltimo, ContextRecommender define un
recomendador que integra informaci√≥n contextual adicional en recomendaciones (informaci√≥n
temporal, TimeSVD) [12].
TensorRec es un sistema de recomendaci√≥n de Python que permite desarrollar r√°pidamente
algoritmos de recomendaci√≥n y personalizarlos con TensorFlow [13]. Un sistema de recomendaci√≥n
TensorRec consume tres datos de entrada: caracter√≠sticas del usuario, caracter√≠sticas del elemento
e interacciones. Seg√∫n las caracter√≠sticas del usuario / elemento, el sistema predecir√° qu√© elementos
recomendar. Las interacciones se utilizan cuando se ajusta el modelo: las predicciones se comparan
con las interacciones y se calcula una p√©rdida / penalizaci√≥n, que el sistema aprende a disminuir
[14].
Surprise (Motor de sistema de recomendaci√≥n simple de Python) es un paquete de Python que
construye y analiza sistemas de recomendaci√≥n que manejan datos de calificaci√≥n expl√≠citos [15].
Facilita el manejo del conjunto de datos, por lo que los usuarios pueden usar conjuntos de datos
integrados (Movielens, Jester) y sus propios conjuntos de datos personalizados. Incluye varios
algoritmos de predicci√≥n, como algoritmos de l√≠nea de base, m√©todos de vecindad, basados en
factorizaci√≥n de matriz (SVD, PMF, SVD++, NMF). Adem√°s, se incluyen varias medidas de similitud
(Coseno, MSD, Pearson, y otros m√°s). Facilita la implementaci√≥n de nuevas ideas de algoritmos.
Tambi√©n, proporcionar herramientas para evaluar, analizar y comparar el rendimiento de los
algoritmos. Finalmente, Surprice no admite calificaciones impl√≠citas o informaci√≥n basada en
contenido [16].

A. Ram√≠rez et al. / Abstraction & Application 29 (2020) 60 - 73

63

Cabe mencionar que hay mucho mas de estos softwares, paquetes y bibliotecas [17][18][19]. Para
saber cu√°l se adapta mejor a las necesidades de cada proyecto se necesita hacer una amplia
investigaci√≥n, as√≠ se podr√° descartar aquellos que no se pueden integrar en el desarrollo del sistema
[20][21]. Ahora, se describen otros trabajos relacionados

Sistemas de recomendaci√≥n de la literatura
En [22], propusieron un sistema de recomendaci√≥n de lugares de comida utilizando informaci√≥n de
redes sociales para determinar las preferencias de grupos en un contexto multiling√ºe. Se evaluaron
cuatro enfoques de recomendaci√≥n diferentes. Esto incluye (1) un enfoque de referencia
(popularidad independiente del idioma) (2) el enfoque propuesto (popularidad dependiente del
idioma) (3) el enfoque propuesto con datos de calificaci√≥n expl√≠citos y (4) el enfoque propuesto con
datos de opini√≥n.
Existen diversas t√©cnicas de recomendaci√≥n dependiendo lo que se requiera buscar, la mayor√≠a
de los sistemas de recomendaci√≥n son de un solo objetivo con lo que se quiere decir que solo busca
una cosa en general. Sin embargo, hoy en d√≠a se requieren mayor informaci√≥n de los restaurantes
que cumplan con ciertos criterios, y surgen los sistemas de recomendaci√≥n multiobjetivo. Tales
como grupos, preferencias, y ambiente del restaurant, en [23] destaca la necesidad de hacer
recomendaciones de objetivos m√∫ltiples y proporciona como soluci√≥n la utilizaci√≥n de ranking de
hipertrofia, usando un modelo de datos usuario atributo-contexto. Utilizando las bases de datos de
Yelp.com. El modelo muestra mediante los experimentos dar una buena recomendaci√≥n, y mejorar
la precisi√≥n de respecto a otros trabajos.
Existen muchos restaurantes que sirven una gran variedad de alimentos buscando satisfacer los
diferentes gustos de sus clientes, y ellos puedan decidir d√≥nde comer, En [24], presentan un sistema
recomendaci√≥n basado en el contenido del restaurante. El sistema de recomendaci√≥n de
restaurante consiste en tres m√≥dulos: m√≥dulo de selecci√≥n de caracter√≠sticas, modelo de espacio
vectorial y m√≥dulo de medida de similitud entre restaurantes, en el primer m√≥dulo selecciona de
forma autom√°tica los atributos m√°s relevantes, reduce la dimensionalidad y elimina los datos
irrelevantes. Su metodolog√≠a est√° basada en el m√©todo de correlaci√≥n, y el de eliminaci√≥n de
caracter√≠sticas recursivas (RFE). El segundo modelo es utilizado para la descripci√≥n de atributos de
un restaurante como precio, tipo de cocina, entre otros. El modelo utiliza Term frequency and
inverse document frequency (TF-IDF). Y finalmente el tercer modulo utiliza el coseno de similaridad
y la distancia euclidiana. El cual muestran el impacto del filtrado de caracter√≠sticas que mejoran el
rendimiento del sistema.
El crecimiento del comercio electr√≥nico ha requerido una adaptaci√≥n de las t√©cnicas de marketing
tradicionales, los comercios ahora hacen uso de los sistemas de recomendaci√≥n para ayudar a los
usuarios a encontrar productos mediante el uso de sistemas de recomendaci√≥n [25]. Tomaron la
informaci√≥n del contexto adicional que rodea a los usuarios en el momento de la compra, basado
en las ofertas para dichos usuarios. Estas ofertas personalizadas, construyeron una relaci√≥n entre el
usuario y el comercio que ofrec√≠a la oferta m√°s apropiada, y de esta manera, ambos lados sal√≠an
favorecidos.
La idea fundamental en [26], fue aplicar t√©cnicas que permitieran estimar las preferencias de los
usuarios sobre cada uno de los √≠tems para luego recomendar a los usuarios aquellos √≠tems con mayor
utilidad estimada. Para ello, el SR fue capaz de estimar las preferencias tanto los √≠tems evaluados
como aquellos √≠tems que el usuario no hab√≠a emitido opini√≥n. Una vez estimadas las preferencias,
las recomendaciones se efectuaron seleccionando los √≠tems de mayor utilidad para cada usuario.

64

Sistema de recomendaci√≥n h√≠brido conversacional para restaurantes

La Inteligencia Artificial contin√∫a creciendo en popularidad en varias plataformas, volvi√©ndose
especialmente prominente en la tecnolog√≠a Chatbot. Un chatbot es un programa dise√±ado para el
contexto social y de asistencia, y su tecnolog√≠a ha ido evolucionando con el tiempo. En [27]
desarrolla un Chatbot basado en texto, que reconoce la entrada del usuario, as√≠ como mediante la
coincidencia de patrones, la informaci√≥n de acceso para proporcionar una confirmaci√≥n
predefinida. Por ejemplo, si el usuario proporciona al bot una frase como "¬øCu√°l es su nombre?" Es
muy probable que el chatbot responda algo como "Mi nombre es Chatbot". O el chatbot responde
como "Puedes llamarme Chatbot".
En [28] describen un ChatBot como un software que utiliza inteligencia artificial para chatear con
personas. Se caracteriza por realizar tareas como responder r√°pidamente a los usuarios,
informarles, ayudar a comprar productos y proporcionar un mejor servicio a los clientes. En este
art√≠culo, se presenta los principios y los conceptos b√°sicos de chatbots basados en inteligencia
artificial y conceptos relacionados, as√≠ como sus aplicaciones en diversos sectores como
telecomunicaciones, banca, salud, centros de llamadas de clientes y comercio electr√≥nico.
El sistema Chatbot increment√≥ un gran inter√©s en los √∫ltimos a√±os en muchos diferentes campos,
bajo la premisa de aumentar la eficiencia y acorta el tiempo de ejecuci√≥n del proceso de negocios
reemplazando la comunicaci√≥n humano-humano, con conversaciones y consultas humano-m√°quina
en lenguajes naturales. Los chatbots de hoy en d√≠a tienen diferentes niveles de capacidades como
agentes de conversaci√≥n de prop√≥sito general o chatbots orientados a tareas, as√≠ como sistemas de
agente de dominio abierto y de dominio espec√≠fico. Si bien los chatbots b√°sicos pueden ser
adecuados para la mayor√≠a de los escenarios, algunos escenarios requieren chatbots m√°s avanzados.
En [29] presenta un sistema de chatbot distribuido para la cadena de suministro. Utiliza la
comunicaci√≥n WebSocket entre la interfaz de usuario y el bot, analiza la consulta del usuario y
proporciona informaci√≥n de los pedidos y suministros consultados.
En el presente trabajo se propone un sistema basado en la integraci√≥n de un Sistema
conversacional (chabot), un sistema basado en ubicaci√≥n geogr√°fica, y dos sistemas de
recomendaci√≥n personalizados (con datos de promociones y gustos frecuentes) para sugerir
restaurantes a usuarios (consumidores). Este trabajo es diferente a los analizados en trabajos
relacionados, dado que existen sistemas de recomendaci√≥n de promociones, preferencias, y
geogr√°ficos, pero funcionan combinando hasta dos sistemas de recomendaci√≥n, pero no,
combinado con un chatbot aqu√≠ presentado.
3 Metodolog√≠a
En la figura 1 se muestra el esquema del sistema propuesto, se observan dos bloques que se detallan
a continuaci√≥n.
Dentro del bloque Origen de datos, se contempl√≥ 2 formas de obtener informaci√≥n: la primer,
aquella informaci√≥n proporcionada por los usuarios al momento de registrarse en la aplicaci√≥n. El
usuario introduce datos personales, gustos, preferencias de lugares, y platillos, adem√°s de la
informaci√≥n de restaurantes que ofrecen promociones y servicios. La segunda, es por medio de
aprendizaje que ya est√° registrado en la base de datos de respuestas a problemas t√©cnicos resueltos
con anterioridad. Tambi√©n, se encuentra el motor de recomendaci√≥n en el cual se encuentran los
algoritmos para la construcci√≥n de los sistemas de recomendaci√≥n.

A. Ram√≠rez et al. / Abstraction & Application 29 (2020) 60 - 73

65

Fig. 1. Diagrama a bloques del Sistema Conversacional
En el segundo bloque, est√° el Chatbot, permite la interacci√≥n entre el usuario y el motor de
recomendaci√≥n; se encarga de interpretar el conocimiento que genera el motor de recomendaci√≥n,
generado con cada b√∫squeda del usuario, y convertirlo a un lenguaje natural interpretable al usuario
y viceversa. Posteriormente, es interpretado como datos de entrada por parte del usuario, se
contin√∫a con el aprendizaje m√°quina usando el analizador de l√≥gica y reglas mediante el uso de
bolsa de palabras, y, por √∫ltimo, la generaci√≥n del leguaje natural que ser√° la respuesta al usuario.
Los m√©todos y algoritmos utilizados para construir estos bloques se detallan en seguida.
Los sistemas de recomendaci√≥n van a sugerir los restaurantes m√°s id√≥neos basado en
informaci√≥n relacionada sobre la ubicaci√≥n, los restaurantes, los usuarios, y las interacciones entre
restaurantes y usuarios. La caracter√≠stica m√°s importante de los sistemas de recomendaci√≥n aqu√≠
propuestos es su capacidad de descubrir las preferencias e intereses de un usuario mediante el
an√°lisis del comportamiento de este usuario y / o el comportamiento de otros usuarios para generar
recomendaciones personalizadas [30][31].
Cada restaurante tiene sus propias caracter√≠sticas. Por ejemplo, el restaurante A ofrece comida
r√°pida, mientras que el restaurante B ofrece comida mexicana. Obviamente, la "comida r√°pida"
puede considerarse como la caracter√≠stica del restaurante A, y la "comida mexicana" puede
considerarse como la caracter√≠stica del restaurante B. Todas las caracter√≠sticas pueden formar un
vector F = (f1, f2, ..., fn), donde fi presenta la caracter√≠stica i-√©sima del restaurante. Dado un
restaurante r, si r tiene fi, entonces fi ser√° Uno, de lo contrario fi ser√° Cero. De esta manera, las
caracter√≠sticas y los restaurantes pueden formar una matriz como se muestra en la Fig. 2. En la
matriz, las columnas representan las caracter√≠sticas y las filas representan los restaurantes. Si el i√©simo restaurante tiene la caracter√≠stica j, entonces (ri, fj) = 1. Cabe se√±alar que cada restaurante
puede tener una o m√°s caracter√≠sticas.

66

Sistema de recomendaci√≥n h√≠brido conversacional para restaurantes
f1
R
r2
‚Ä¶
rj
‚Ä¶

f2

...

fj

‚Ä¶

fn

1

1

rn

Fig. 2. Matriz de caracter√≠sticas de restaurantes
Tomando en cuenta las caracter√≠sticas de los restaurantes, estas caracter√≠sticas tambi√©n pueden
reflejar las preferencias del usuario. Por lo tanto, el vector de la preferencia P de un usuario puede
representarse como P = (f1, f2, ..., fn). Cuando un usuario inicia sesi√≥n por primera vez en el sistema
propuesto, se le pedir√° que seleccione algunas caracter√≠sticas de preferencia de los restaurantes
como el valor inicial del vector de preferencia del usuario. El valor de las caracter√≠sticas
seleccionadas ser√° Uno. La figura 3 muestra el modelo de preferencia del usuario. Dado un
restaurante R, R tiene las caracter√≠sticas f2 y f3. Si un usuario en su visita consume de estas
caracter√≠sticas en este restaurante, las funciones del restaurante se agregar√°n a las funciones de
preferencia correspondientes del usuario.

Fig. 3. Modelo de preferencias del usuario.
Con el aumento de los restaurantes por consumo al visitarlos, las caracter√≠sticas preferidas por los
usuarios ser√°n cada vez m√°s expl√≠citas. El valor de las caracter√≠sticas de preferencia del usuario debe
normalizarse usando la ecuaci√≥n 1.

(1)
De esta manera, la Normalizaci√≥n (fi) estar√° limitada en [0, 1]. Para el vector de caracter√≠sticas de
preferencia del usuario es P = (0, 2, 1, 1). Despu√©s de normalizado, el vector ser√° P = (0, 0.5, 0.25,
0.25).
Dado un usuario u, cuyo vector de caracter√≠sticas de preferencia es Pu = (p1, p2, ..., pn), y dado un
restaurante r, cuyo vector de caracter√≠sticas es Fr = (f1, f2, ..., fn). Para determinar si el usuario u
prefiere o no, al restaurante r, el algoritmo propuesto adopta la similitud de coseno para calcular la
similitud entre u y r. La ecuaci√≥n 2, contempla la similitud del coseno entre u y r.

A. Ram√≠rez et al. / Abstraction & Application 29 (2020) 60 - 73

67

(2)
Similitud (u, r) siempre estar√° entre [0, 1]. Si Similitud (u, r) est√° cerca de 1, u y r son muy similares.
Por ejemplo, si Pu = (0, 0.5, 0.5, 0) y Fr = (0, 1, 0, 1), Similitud (u, r) ser√° 0.5. Despu√©s de que el
usuario consume en el restaurante r, Pu ser√° (0, 0.5, 0.25, 0.25) y Similitud (u, r) ser√° 0.86.
Obviamente, si el usuario u consume en el restaurante r muchas veces, la similitud entre u y r
aumentar√°. Por lo tanto, la similitud del coseno puede reflejar efectivamente el cambio de
preferencia del usuario.
Dado que el sistema de recomendaci√≥n de restaurantes propuesto toma en cuenta que el usuario
tiende a ir al restaurante m√°s cercano en general. Por lo tanto, la distancia entre el usuario y el
restaurante es un factor muy importante, que puede influir directamente en el resultado de la
recomendaci√≥n. En el sistema propuesto, se utilizan las posiciones de usuarios y restaurantes para
categorizarlos. El sistema puede obtener la latitud y la longitud de la posici√≥n. Por lo tanto, el
sistema puede calcular la distancia entre dos puntos cualquiera usando su latitud y longitud. Dado
dos puntos (A (x1, y1), B (x2, y2)), suponga que x es la latitud e y es la longitud, a = cos (x1- x2), b =
cos (y1- y2), c = cos x1 * cos x2, y RadioTierra es el radio de la tierra. La distancia entre A y B se
calcula mediante la ecuaci√≥n 3:

(3)
Cuando el usuario envi√≥ una solicitud de recomendaci√≥n, el sistema propuesto obtiene los
restaurantes cercanos en el √°rea del radio R. Aqu√≠, R es un radio modificable. Despu√©s de eso, la
distancia entre el usuario y cada restaurante se calcular√° de acuerdo con la ecuaci√≥n 3. La figura 4
muestra la posici√≥n del usuario y restaurantes en el √°rea de radio R.

Fig. 4. Ubicaci√≥n actual del usuario y restaurantes.

68

Sistema de recomendaci√≥n h√≠brido conversacional para restaurantes

Para determinar los resultados de la recomendaci√≥n, la calificaci√≥n de cada restaurante se calcul√≥
con la ecuaci√≥n 4.

ùê∂ùëéùëôùëñùëìùëñùëêùëéùëêùëñ√≥ùëõ ùë¢,ùëüùëñ = ùõº‚àóùëÜùëñùëöùëñùëôùëéùëü ùë¢,ùëüùëñ +ùõΩ ‚àó 1‚àí

ùê∑ùëñùë†ùë°ùëéùëõùëêùëñùëé ùë¢,ùëüùëñ
‚àó∆ø
ùëÖ

(4)

Los valores de Œ±, Œ≤, y œÅ son pesos para manipular los criterios. Inicialmente se establecieron los
siguientes valores, Œ± = 0.40, Œ≤ = 0.40, y œÅ = 0.2. Seg√∫n la f√≥rmula (4.3), si dos restaurantes tienen la
misma similitud, el m√°s cercano obtendr√° una calificaci√≥n m√°s alta, si no hubiese promociones. Por
el contrario, si dos restaurantes se encuentran a la misma distancia del usuario y sin promociones,
el m√°s similar obtendr√° una calificaci√≥n m√°s alta. La calificaci√≥n es una compensaci√≥n entre la
similitud y la distancia, y con un extra si tuvieran una promoci√≥n. Seg√∫n La calificaci√≥n de cada
restaurante, todos los restaurantes se ordenar√°n de mayor a menor. Los mejores restaurantes
visitados por consumos se recomendar√°n al usuario.
Por otra parte, para procesar al lenguaje, sus componentes: gram√°tica, sintaxis y construir
estructuras de apoyo que servir√°n como entrada para algoritmos de Regresi√≥n Lineal, Regresi√≥n
Log√≠stica, Clasificador Naive Bayes, Clasificador √°rbol de decisi√≥n o Clasificador Redes Neuronales
seg√∫n el resultado que se busque, las siguientes t√©cnicas comunes pueden usarse en NLP: Tokenizar,
Tagging Part of Speech, Shallow parsing / Chunks, Significado de las palabras, Pragmatic Analysis,
word2vect, y Bag of words. La t√©cnica utilizada para este proyecto chatbot es la t√©cnica de Bag of
words debido a la simulaci√≥n de palabras utilizadas en una conversaci√≥n con el usuario que sirve
para dar sugerencias a su b√∫squeda.
En Bag of words, es necesario una forma de representar datos de texto para el algoritmo de
aprendizaje autom√°tico. En este enfoque, se utilizan las palabras con token para cada observaci√≥n
y descubrir la frecuencia de cada token mediante el concepto de profundizaci√≥n. Considere las
siguientes oraciones:
‚Ä¢ "Fue el mejor de los tiempos"
‚Ä¢ "Fue el peor de los tiempos"
‚Ä¢ "Era la era de la sabidur√≠a"
‚Ä¢ "Era la era de la necedad"
Se trata cada oraci√≥n como un documento separado y se hace una lista de todas las palabras de los
cuatro documentos, excluyendo la puntuaci√≥n.
'Es', 'fue', 'el', 'mejor', 'de', 'tiempos', 'peor', 'edad', 'sabidur√≠a', 'necedad'.
El siguiente paso es crear vectores. Se toma el primer documento: "Fue el mejor de los tiempos" y
se verifica la frecuencia de las palabras de las 10 palabras √∫nicas. ‚ÄúFue‚Äù = 1, ‚Äúel‚Äù = 1, ‚ÄúMejor‚Äù = 1,
‚ÄúDe‚Äù = 1, ‚Äútiempos‚Äù = 1, ‚Äúpeor‚Äù = 0, ‚Äúedad‚Äù = 0, ‚Äúsabidur√≠a‚Äù = 0, y ‚Äúnecedad‚Äù = 0.
El resto de los documentos ser√°n:
"Fue el mejor de los tiempos" = [1, 1, 1, 1, 1, 0, 0, 0, 0]
"Fue el peor de los tiempos" = [1, 1, 0, 1, 1, 1, 0, 0, 0]

A. Ram√≠rez et al. / Abstraction & Application 29 (2020) 60 - 73

69

"Era la era de la sabidur√≠a" = [1, 1, 0, 1, 0, 0, 1, 1, 0]
"Era la era de la necedad‚Äù = [1, 1, 0, 1, 0, 0, 1, 0, 1]
En este enfoque, cada palabra o token se llama "gramo". Tambi√©n se puede crear un vocabulario
de pares de dos palabras, llamado modelo bigram. Los bigrams en el primer documento: "Fue el
mejor de los tiempos" son los siguientes: "fue", "fue √©l", "el mejor", ‚Äúde los tiempos".
El proceso de convertir texto en el Procesamiento de Lenguaje Natural (NLP) en n√∫meros se llama
vectorizaci√≥n en Aprendizaje M√°quina. Las diferentes formas de convertir texto en vectores son:
contar la cantidad de veces que cada palabra aparece en un documento, y calcular la frecuencia con
la que cada palabra aparece en un documento de todas las palabras en el documento.

4 Resultados
El sistema propuesto fue desarrollado en java, dado que ser√° incorporado a una aplicaci√≥n m√≥vil
comercial FoodExpressMR. Existen 20 categor√≠as de preferencias a seleccionar como gustos
predeterminados. Los datos de los restaurantes fueron tomados de la aplicaci√≥n. Los datos de los
usuarios fueron generados por los autores. Las herramientas software que se usaron fueron
NetBeans 8.2, Xamp 3.2.4 y el servidor Tomcat. La figura 5, muestra la ejecuci√≥n del proyecto.

Fig. 5. Ejecuci√≥n del proyecto desde NetBeans.
En particular, se utiliz√≥ un enfoque de validaci√≥n cruzada para evitar el sesgo causado por la
selecci√≥n de los conjuntos de entrenamiento y prueba [32]. La validaci√≥n cruzada consiste en
generar diferentes conjuntos de datos (un conjunto por partici√≥n que es un par√°metro del
procedimiento de validaci√≥n) que luego se utiliz√≥ como entrada de entrenamiento y prueba. El
procedimiento seleccion√≥ iterativamente una partici√≥n como prueba y el resto como
entrenamiento para evaluar un algoritmo y proporciona una media de las m√©tricas obtenidas para
cada iteraci√≥n. Se realiz√≥ una validaci√≥n cruzada con tres, cinco y siete particiones, repitiendo cinco
veces y recopilando la media de la precisi√≥n (M√©trica de las matrices de confusi√≥n). M√°s all√° del tipo
de datos a analizar, se quer√≠a saber la solidez de los tres sistemas de recomendaci√≥n que forman el
motor de recomendaci√≥n para el sistema de recomendaci√≥n conversacional, con respecto a la
distribuci√≥n de entrenamiento / prueba.

70

Sistema de recomendaci√≥n h√≠brido conversacional para restaurantes

Para cada par de calificaciones Calificaci√≥n C (u, ri) (predicci√≥n del sistema propuesto) y C (u, ri)
(calificaci√≥n real no utilizada para entrenar del sistema propuesto), se aplicaron las m√©tricas: error
absoluto medio (MAE) y el error cuadr√°tico medio (RMSE) [33]. MAE y RMSE nunca fueron
negativos, pero cuanto m√°s cerca est√°n a cero, se mejora el rendimiento. Se observa que a medida
que disminuye la base de entrenamiento (y por lo tanto aumenta la base de prueba), aumentan los
errores. En el caso de del Sistema de recomendaci√≥n por preferencia (SR-Preferencia), la
dependencia del tama√±o del conjunto de entrenamiento es mayor. Tambi√©n se puede observar que
los resultados del Sistema de recomendaci√≥n por distancia (SR-Distancia) tienen una clara ventaja
sobre el Sistema de recomendaci√≥n por preferencia, ya que MAE y RMSE son significativamente m√°s
bajos. Sin embargo, la diferencia con el Sistema de recomendaci√≥n por preferencia no es tan
significativa. Para aclarar este punto, se realiz√≥ una validaci√≥n estad√≠stica con los resultados
obtenidos para cada partici√≥n y en la t√©cnica de validaci√≥n cruzada de tres, cinco y siete particiones
(34,33, y 33 resultados parciales por t√©cnica), ver figura 6. Los resultados obtenidos se muestran en
la tabla 1, usando un total de 100 usuarios).

Fig. 6. Evaluaci√≥n del error absoluto medio y el error cuadr√°tico medio.
Tabla 1. Resultados de la evaluaci√≥n de MAE y RMSE aplicado a los 3 sistemas de recomendaci√≥n
con diferentes tama√±os de Entrenamiento. Los n√∫meros en negrita indican los mejores resultados.
SR-Promoci√≥n
Porcentaje de Entrenamiento
85% de entrenamiento (7 particiones)
80% de entrenamiento (5 particiones)
66% de entrenamiento (3 particiones)
SR-Distancia
Porcentaje de Entrenamiento
85% de entrenamiento (7 particiones)
80% de entrenamiento (5 particiones)
66% de entrenamiento (3 particiones)
SR-Preferencia
Porcentaje de Entrenamiento
85% de entrenamiento (7 particiones)
80% de entrenamiento (5 particiones)
66% de entrenamiento (3 particiones)

MAE
0.72
0.72
0.73

RMSE
1.40
1.40
1.39

MAE
0.65
0.65
0.67

RMSE
1.37
1.37
1.38

MAE
1.35
1.46
1.83

RMSE
1.70
1.81
2.17

La tabla 2 muestra los resultados de las m√©tricas de las matrices de confusi√≥n para los sistemas de
recomendaci√≥n por a) preferencia, b) promoci√≥n y c) ubicaci√≥n geogr√°fica, comparando los 100
datos reales contra los datos de predicci√≥n obtenidos. Los resultados obtenidos son satisfactorios
dado que los valores obtenidos en macro-average-media fueron: por preferencia = 90%, promoci√≥n
= 96% y para ubicaci√≥n = 100%.

A. Ram√≠rez et al. / Abstraction & Application 29 (2020) 60 - 73

71

En las figuras 7.a, 7.b y 7.c se muestran las sugerencias obtenidas por los tres diferentes sistemas
recomendadores como motor de recomendaci√≥n para el sistema de recomendaci√≥n conversacional.
En la figura 7.a, se observa que es predominante el valor de la preferencia del restaurante por parte
del cliente sobre la distancia. En la figura 7.b es predominante el restaurante con promoci√≥n y
cercano a la ubicaci√≥n actual. La figura 7.c es predominante el restaurante mas cercano y que tenga
alguna de las preferencias del usuario.
Tabla 2. Resultados de m√©tricas de matriz de confusi√≥n para los sistemas de recomendaci√≥n por a)
preferencia, b) promoci√≥n y c) ubicaci√≥n geogr√°fica.

Fig 7. Salida del Sistema de recomendaci√≥n conversacional por a) preferencia del usuario, b)
promoci√≥n y c) ubicaci√≥n geogr√°fica.

Conclusiones
En este trabajo se ha presentado un Sistema de recomendaci√≥n conversacional, quien en su motor
de recomendaciones utiliza un sistema de recomendaci√≥n basado en ubicaci√≥n geogr√°fica, y dos
sistemas de recomendaci√≥n personalizados que sugieren restaurantes basado en promociones y
gustos. Se utiliz√≥ un sistema de recomendaci√≥n basado en filtro colaborativo, un sistema de

72

Sistema de recomendaci√≥n h√≠brido conversacional para restaurantes

recomendaci√≥n basado en contenido y un sistema de recomendaci√≥n basado en ubicaciones
geogr√°ficas.
Se alcanz√≥ el objetivo en esta investigaci√≥n, al verificar que el sistema de recomendaci√≥n
conversacional recomend√≥ restaurantes con altas calificaciones, tomando en cuenta la informaci√≥n
de los restaurantes visitados, promociones que se brindaban en el momento en que se solicit√≥ la
recomendaci√≥n, e hizo una selecci√≥n final por la ubicaci√≥n en tiempo real del usuario y los
restaurantes cercanos previamente filtrados.
En el primer resultado obtenido, se demuestra mediante un algoritmo de K-medias, que existen
grupos bien definidos entre los datos de platillos y restaurantes utilizados para las pruebas de este
trabajo. En el segundo grupo de pruebas, se muestra cuando el sistema conversacional sugiere a un
restaurante por la definici√≥n de sus preferencias al registrarse, igual, sugiere a un restaurante por
la mejor promoci√≥n dada una fecha y finalmente, despu√©s de que el usuario realiz√≥ ciertos
consumos, sugiere a un restaurante basado en las visitas, promociones y la distancia m√°s corta
referente a su ubicaci√≥n.
Se observa que el sistema de recomendaci√≥n por distancia tiene un mejor rendimiento, dado que
solo filtra los restaurantes tomando en cuenta el radio fijo y los restaurantes m√°s cercanos. A
continuaci√≥n, se ubica el sistema de recomendaci√≥n por promociones, dado que √∫nicamente filtra
si tiene el restaurante ofrece promoci√≥n y tasas de descuento. Finalmente, el de menor desempe√±o
fue el sistema de recomendaci√≥n por Preferencias.
Al trabajo reportado a√∫n falta agregar que la informaci√≥n dada por el usuario sea mediante
comandos de voz. Probar nuevas modelos para integrar los tres sistemas de recomendaci√≥n aqu√≠
propuestos.

Agradecimientos
Al Conacyt por el apoyo de beca para estudios de maestr√≠a.

Referencias
S. Owen, R. AnilT. Dunning and E. Friedman, ‚ÄúMahout in action‚Äù, Manning Publication, 2011.
O. E. Gonz√°lez and S.M. Jacques. ‚ÄúEstado del arte en los sistemas de recomendaci√≥n‚Äù, Research
in Computing Science 135 (2017) pp. 25-40
[3] Bokde, D. K., Girase, S., and Mukhopadhyay, D. An item-based collaborative itering using
dimensionality reduction techniques on mahout framework, (2015).
[4] Y. Sun and Y. Zhang, ‚ÄúConversational Recommender System‚Äù, The 41st International ACM SIGIR
Conference on Research & Development in Information Retrieval, June 2018 , pp. 235‚Äì244
[5] D. Jannach, A. Manzoor, W. Cai and L. Chen ‚ÄúA Survey on Conversational Recommender
Systems‚Äù ArXiv, abs/2004.00646, (2020)
[6] R. Bavaresco, D. Silveira, E. Reis, J. Barbosa, R. Righi, C. Costa, R. Antunes, M. Gomes, C. Gatti,
M. Vanzin, S.C. Junior, E. Silva and C. Moreira, ‚ÄúConversational agents in business: A systematic
literature review and future research directions‚Äù. Computer Science Review, 36, (2020)
[7] E. Jain and S. K. Jain, "Categorizing Twitter users on the basis of their interests using
Hadoop/Mahout platform," 2014 9th International Conference on Industrial and Information
Systems (ICIIS), Gwalior, pp. 1-5,2014, doi: 10.1109/ICIINFS.2014.7036529.7
[8] S. Bagchi, ‚ÄúPerformance and Quality Assessment of Similarity Measures in Collaborative Filtering
Using Mahout‚Äù, Precedia Computer Science 50, pp. 229-234, 2015
[9] Apache Mahout, Obtenido de https://mahout.apache.org/users/recommender/recommenderdocumentation.html
[10] M. Mansoury, R. Burke, A. Ordonez-Gauger and X. Sepulveda, ‚ÄúAutomating recommender
systems experimentation with librec-auto‚Äù, pp.
500-501, September 2018
10.1145/3240323.3241614.
[1]
[2]

A. Ram√≠rez et al. / Abstraction & Application 29 (2020) 60 - 73

73

[11] G. Guo, J. Zhang, Z. Sun, and N. Yorke-Smith. ‚ÄúLibRec: A Java library for recommender systems‚Äù.

AMAP Workshop Proceedings, vol. 4, 2015.

[12] LibRec. Obtenido de https://www.librec.net/dokuwiki/doku.php?id=introduction
[13] Google
Cloud,
Obtenido
de
https://cloud.google.com/solutions/machine-

learning/recommendation-system-tensorflow-overview

[14] G. Goyal and S. Dhingra, "Hybrid tensorflow based portable document formatted recommender

system," 2017 International Conference on I-SMAC (IoT in Social, Mobile, Analytics and Cloud)
(I-SMAC), Palladam, 2017, pp. 357-363, doi: 10.1109/I-SMAC.2017.8058371.
[15] https://surprise.readthedocs.io/en/stable/
[16] G S, Ananth and K, Raghuveer, ‚ÄúA Movie and Book Recommender System using Surprise
Recommendation‚Äù,February 21, 2020.
[17] A.J.Fernandez-Garcia, L. Iribarne, A. Corral, J.Criado and J. Wang. A ‚ÄúRecommender system for
component-based applications using machine learning techniques‚Äù, Knowledge-Based Systems,
vol. 164, pp. 68-84, January 2019. 10.1016/j.knosys.2018.10.019.
[18] A. Argyriou, M. Gonz√°lez-Fierro and L. Zhang, ‚ÄúMicrosoft recommenders: Best practices for
production-ready recommendation systems‚Äù. In Companion Proceedings of the Web
Conference 2020, WWW '20, pp. 50-51, New York, NY, USA. Association for Computing
Machinery. April 2020.
[19] Microsoft
Azure, Obtenido de
https://azure.microsoft.com/en-us/blog/buildingrecommender-systems-with-azure-machine-learning-service/
[20] A. Costa, E. Fressato, F. Neto, M. Manzato and R. Campello ‚ÄúCase Recommender: A Flexible and
Extensible Python Framework for Recommender Systems‚Äù, Proceeding of the 12 ACM, pp. 494495, September 2018.
[21] A. da Costa, E. Fressato, F. Neto, M. Manzato and R. Campello, ‚ÄúCase Recommender: A Flexible
and Extensible Python Framework for Recommender Systems‚Äù, In Proceedings of the 12th ACM
Conference on Recommender Systems, pp. 494-495, September 2018
[22] P. Siriyaya, Y. Nakaoka,Y. Wang, and Y. Kawai,. A food venue recommender system based on
multilingual geo-tagged tweet analysis. pages 686-689. (2018)
[23] M. Mao, J.Lu an J. Zhang, ‚ÄúMultiobjective e-commerce recommendations based on hypergraph

ranking‚Äù, Information Sciences, january 2019 , Elsevier, pp. 269-287.
Afoudi, M. Lazaar and M. Al Achhab,‚Äù Impact of feature selection on content-based
recommendation system‚Äù, pp. 1-6 (2019).
[25] A. Greenstein-Messica and L. Rokach, ‚ÄúMachine learning and operation research based method
for promotion optimization of products with no price elasticity history ‚Äù, Electronic commerce
Research and Aplications, (2019).
[26] Y. Kai-Hao, S. Yuxuan, W.Chih-Yun, Y. Pu-Tai and W Chuan-Yu, ‚ÄúAn Exploratory Study of the
Promotion Effectiveness of Recommender Systems‚Äù, ICCMB 2020: Proceedings of the 2020 the
3rd International Conference on Computers in Management and BusinessJanuary 2020, pp 135‚Äì
140
[27] M. Dahiya, ‚Äúa Tool of conversation: Chatbot‚Äù Dept. of Computer Science, Maharaja Surajmal
Institute, Janakpuri, India Corresponding www.ijcseonline.org (2017)
[28] N. Albayrak, A. √ñzdemir and E. Zeydan, "An overview of artificial intelligence based chatbots and
an example chatbot application," 2018 26th Signal Processing and Communications Applications
Conference (SIU), Izmir, 2018, pp. 1-4.
[29] S. Angelov and M. Lazarova, ‚ÄúE-Commerce Distributed Chatbot System‚Äù. Association for
Computing Machinery, in Proceedings of the 9th Balkan Conference on Informatics. 2019,
Art√≠culo 8, p√°ginas:1-8.
[30] A. Noulas, S. Scellato, C. Mascolo, M. Pontil, ‚ÄúAn empirical study of geographic user activity
patterns in foursquare‚Äù, pp. 570-573 (2011).
[31] M. Ye, P. Yin,W-C Lee,D-L. Lee, Exploiting Geographical Influence for Collaborative Point-ofinterest Recommendation. Proceedings of the 34th International ACM SIGIR Conference on
Research and Development in Information Retrieval. (2011-01-01). pp. 325‚Äì334.
[32] G.J. McLachlan, K.A Do and C. Ambroise, Analyzing microarray gene expression data. Wiley
(2004).
[33] D. Stroock, Probability Theory. Cambridge University Press. pp. 43. (2011). ISBN 978-0-52113250-3.
[24] Y.

